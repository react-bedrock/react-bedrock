@use 'sass:meta';

@mixin map-to-styles-helper($map, $key) {
  @each $name, $value in $map {
    // copy map key to track current spot
    $key-copy: $key;

    // create name for CSS custom property that contains:
    // current key + child key from nested map
    @if($key) {
      $key: #{$key}-#{$name};
    }
    @else {
      $key: $name;
    }
    

    @if meta.type-of($value) == 'map' or meta.type-of($value) == 'list' {
      @include map-to-styles-helper($value, $key);
    } @else {
      #{$key}: #{$value};
    }

    // reset map key for next iteration
    $key: $key-copy;
  }
};

// create mixin
@mixin scss-map-to-element-styles($map) {
  @each $element, $inner-map in $map {
    #{$element} {
      @each $name, $value in $inner-map {
        $key: $name;

        @if meta.type-of($value) == 'map' or meta.type-of($value) == 'list' {
          @include map-to-styles-helper($value, $key);
        } @else {
          #{$key}: #{$value};
        }
      }
    }
  }
};
